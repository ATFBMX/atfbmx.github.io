<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Association of Toronto Flatlanders (ATF)</title>
  <meta name="description" content="ATF — Toronto Flatland BMX community: riders, videos, gallery, contact." />
  <meta property="og:title" content="Association of Toronto Flatlanders (ATF)" />
  <meta property="og:description" content="Flatland BMX in Toronto, Canada" />
  <meta property="og:type" content="website" />
  <link rel="preload" href="assets/style.css" as="style" />
  <link rel="stylesheet" href="assets/style.css" />
</head>
<body>
<header class="hero">
  <div class="wrap">
    <img src="assets/logo.png" alt="" class="logo" />
    <h1>Association of Toronto Flatlanders</h1>
    <p class="tag">Flatland BMX in Toronto, Canada</p>
    <nav class="nav" aria-label="Primary">
      <a href="#about">Who We Are</a>
      <a href="#video">Video</a>
      <a href="#gallery">Gallery</a>
      <a href="#contact">Contact</a>
    </nav>
    <a class="cta" href="#video">Watch the clip ↓</a>
  </div>
</header>

<main class="wrap">
  <!-- WHO WE ARE + RIDERS GRID -->
  <section id="about" class="block">
    <h2>Who We Are</h2>
    <p>We’re a community of Toronto flatland riders. We ride, mentor, run jams, and keep the scene moving.</p>

    <div id="ridersGrid" class="grid riders-grid" aria-live="polite"></div>
  </section>

  <!-- WHAT WE DO as 3 CARDS (no links) -->
  <section class="block">
    <h2>What We Do</h2>
    <div class="grid services-grid">
      <article class="card service">
        <div class="pad">
          <h3>Open practice sessions & rider mentoring</h3>
          <p>Regular meetups and open-floor mentoring for all levels. Placeholder for a longer description (2–3 lines) about format, times, and what to expect.</p>
        </div>
      </article>
      <article class="card service">
        <div class="pad">
          <h3>Local jams, demos & community events</h3>
          <p>We organize and support jams, demos, and collaborations with local orgs. Placeholder text explaining how to join or host one.</p>
        </div>
      </article>
      <article class="card service">
        <div class="pad">
          <h3>Beginner support: tips, setup, progression</h3>
          <p>Guidance on bike setup, safety, and progression plans. Placeholder text on resources, intros, and first-session help.</p>
        </div>
      </article>
    </div>
  </section>

  <!-- VIDEO -->
  <section id="video" class="block">
    <h2>Featured Video</h2>
    <div class="video-wrapper">
      <iframe
        src="https://www.youtube.com/embed/o8P-oUWC4Nw?rel=0"
        title="ATF Toronto Flatland — Featured Video"
        frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        allowfullscreen
        referrerpolicy="strict-origin-when-cross-origin"></iframe>
    </div>
  </section>

  <!-- GALLERY -->
  <section id="gallery" class="block">
    <h2>Gallery</h2>
    <div class="thumbs" id="galleryThumbs"></div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="block contact">
    <h2>Contact</h2>
    <div class="card contact-card">
      <div class="pad">
        <p>Want to ride with us, collab on an event, or learn flatland?</p>
        <p>Email: <a href="mailto:contact@atf-toronto.org">contact@atf-toronto.org</a></p>
        <p>Instagram: <a href="https://instagram.com/" target="_blank" rel="noopener">Follow us</a></p>
      </div>
    </div>
  </section>
</main>

<footer class="foot">
  <div class="wrap">
    <nav class="nav foot-nav" aria-label="Footer">
      <a href="#about">Who We Are</a>
      <a href="#video">Video</a>
      <a href="#gallery">Gallery</a>
      <a href="#contact">Contact</a>
    </nav>
    <p>&copy; 2025 Association of Toronto Flatlanders</p>
  </div>
</footer>

<!-- Lightbox modal (used for gallery and rider photos) -->
<div class="lightbox" id="lightbox" aria-hidden="true" aria-label="Image viewer" role="dialog">
  <button class="close" id="lbClose" aria-label="Close (Esc)">Close ✕</button>
  <figure>
    <img id="lbImg" alt="Full-size image" />
    <figcaption id="lbCap"></figcaption>
  </figure>
</div>

<script>
/* ===== Basic placeholder (your real logo file) ===== */
const PLACEHOLDER = 'assets/logo.png';

/* Helpers: add fallback to images that fail */
function addFallback(img) {
  if (!img.getAttribute('src')) img.src = PLACEHOLDER;
  img.onerror = () => { img.onerror = null; img.src = PLACEHOLDER; };
}

/* ===== RIDERS (8 only) =====
   Provide thumb + full so clicking opens big version */
const riders = [
  { name: 'Tall Paul', bio: 'Tech links, turbine spins, scene builder since day one.', linkText: 'Instagram', linkHref: '#', thumb: 'assets/riders/tallpaulbmx12.jpg', full: 'assets/riders/tallpaulbmx12.jpg' },
  { name: 'Bert',       bio: 'Flow style, frontyard classics. Riding since 2004.',     linkText: 'Profile',   linkHref: '#', thumb: '', full: '' },
  { name: 'Brandon',    bio: 'Fast combos, dialed whiplash control.',                   linkText: 'Link',      linkHref: '#', thumb: 'assets/riders/img_4031-1-924x924.jpg', full: 'assets/riders/img_4031-1-924x924.jpg' },
  { name: 'Juan',       bio: 'Explosive switches, loves outdoor autumn sessions.',      linkText: 'Link',      linkHref: '#', thumb: '', full: '' },
  { name: 'Colin',      bio: 'Original lines, quiet killer at jams.',                   linkText: 'Insta',     linkHref: '#', thumb: '', full: '' },
  { name: 'Jess',       bio: 'Smooth turbines, backwheel consistency.',                 linkText: 'Link',      linkHref: '#', thumb: '', full: '' },
  { name: 'Remy',       bio: 'Flatland lifer. Community first.',                        linkText: 'Link',      linkHref: '#', thumb: '', full: '' },
  { name: 'Andre',      bio: 'Backyard scientist, loves bike setup chats.',             linkText: 'Link',      linkHref: '#', thumb: '', full: '' }
];

const ridersGrid = document.getElementById('ridersGrid');
ridersGrid.innerHTML = riders.map(r => `
  <article class="card rider">
    <a href="${r.full || PLACEHOLDER}" class="rider-link" data-full="${r.full || PLACEHOLDER}" data-caption="${r.name}">
      <img src="${r.thumb || PLACEHOLDER}" alt="${r.name}" class="rider-img" loading="lazy" width="400" height="300" />
    </a>
    <div class="pad">
      <h3>${r.name}</h3>
      <p>${r.bio}</p>
      <a href="${r.linkHref}" target="_blank" rel="noopener">${r.linkText}</a>
    </div>
  </article>
`).join('');
ridersGrid.querySelectorAll('img').forEach(addFallback);

/* Click rider -> lightbox */
const lb = document.getElementById('lightbox');
const lbImg = document.getElementById('lbImg');
const lbCap = document.getElementById('lbCap');
const lbClose = document.getElementById('lbClose');

function openLB(src, caption) {
  lbImg.src = src || PLACEHOLDER;
  lbCap.textContent = caption || '';
  lb.setAttribute('aria-hidden','false');
  document.body.style.overflow='hidden';
  lbClose && lbClose.focus && lbClose.focus();
}
function closeLB() {
  lb.setAttribute('aria-hidden','true');
  lbImg.removeAttribute('src');
  document.body.style.overflow='';
}

ridersGrid.addEventListener('click', (e) => {
  const link = e.target.closest('a.rider-link');
  if (!link) return;
  e.preventDefault();
  openLB(link.dataset.full || link.href, link.dataset.caption || '');
});

/* ===== GALLERY (same lightbox) ===== */
const gallery = Array.from({ length: 8 }).map((_, i) => ({
  thumb: '',  // e.g. 'assets/gallery/thumbs/atf_01_480.jpg'
  full:  '',  // e.g. 'assets/gallery/full/atf_01.jpg'
  alt: `ATF gallery ${i+1}`,
  caption: `ATF — placeholder ${i+1}`
}));

const thumbs = document.getElementById('galleryThumbs');
thumbs.innerHTML = gallery.map(p => `
  <figure class="thumb">
    <a class="glink" href="${p.full || PLACEHOLDER}" data-full="${p.full || PLACEHOLDER}" data-caption="${p.caption}">
      <img src="${p.thumb || PLACEHOLDER}" alt="${p.alt}" loading="lazy" width="320" height="240" />
    </a>
    <figcaption>${p.caption}</figcaption>
  </figure>
`).join('');
thumbs.querySelectorAll('img').forEach(addFallback);

/* Click gallery -> lightbox */
thumbs.addEventListener('click', (e) => {
  const link = e.target.closest('a.glink');
  if (!link) return;
  e.preventDefault();
  openLB(link.dataset.full || link.href, link.dataset.caption || '');
});

/* Close lightbox */
lbClose && lbClose.addEventListener('click', closeLB);
lb.addEventListener('click', (e)=>{ if(e.target === lb) closeLB(); });
document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeLB(); });
</script>
</body>
</html>
